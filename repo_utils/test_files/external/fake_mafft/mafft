#!/usr/bin/env python3
"""
Given a haps.fa, return the pre-computed result
"""
import os
import sys
import json
import hashlib

fn = sys.argv[-1]
sys.stderr.write(f"Running fake MAFFT for {fn}\n")
m_dir = os.path.dirname(os.path.realpath(__file__))

lookup = json.load(open(os.path.join(m_dir, "mafft_results.json"), 'r'))
with open(fn, 'r') as fh:
    data = fh.read()
    m_key = hashlib.md5(data.encode('utf-8')).hexdigest()
    with open(os.path.join(m_dir, lookup[m_key])) as result:
        sys.stdout.write(result.read())
